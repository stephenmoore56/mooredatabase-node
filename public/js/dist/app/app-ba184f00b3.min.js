var myApp=angular.module("myApp",["ngRoute"]);myApp.config(["$routeProvider",function(t){"use strict";t.when("",{templateUrl:"/templates/nodejs.html"}).when("/nodejs",{templateUrl:"/templates/nodejs.html"}).when("/angularjs",{templateUrl:"/templates/angularjs.html"}).when("/bootstrap",{templateUrl:"/templates/bootstrap.html"}).when("/birding",{templateUrl:"/templates/orders.html"}).when("/orders",{templateUrl:"/templates/orders.html"}).when("/months",{templateUrl:"/templates/months.html"}).when("/years",{templateUrl:"/templates/years.html"}).when("/species",{templateUrl:"/templates/species.html"}).when("/detail/:id",{templateUrl:"/templates/detail.html"}).otherwise({redirectTo:"/nodejs"})}]),function(){"use strict";myApp.factory("ReportCharts",function(){var t=function(t){var e=Plotly.d3,r=90,o=90,a=e.select("#"+t).style({width:r+"%",height:o+"vh"}),n=a.node();window.onresize=function(){Plotly.Plots.resize(n)}};return{drawChartSpeciesByMonth:function(e,r){var o,a,n,s,i,c,l,p;if(0!==e.length){for(t(r),o=[],a=[],n=[],l=0;l<e.length;l++)o[l]=e[l].monthName.substring(0,3),a[l]=e[l].speciesCount,n[l]=e[l].tripCount;i={x:o,y:a,name:"Species",type:"bar",marker:{color:"#ff7f0e"}},c={x:o,y:n,name:"Trips",mode:"lines+markers",marker:{color:"#3072AB"}},s=[i,c],p={margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{title:"Month",type:"category"},yaxis:{title:"Species / Trips"}},Plotly.newPlot(r,s,p,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}},drawChartSpeciesByYear:function(e,r){var o,a,n,s,i,c,l,p;if(0!==e.length){for(t(r),o=[],a=[],n=[],l=0;l<e.length;l++)o[l]=e[l].yearNumber,a[l]=e[l].speciesCount,n[l]=e[l].tripCount;i={x:o,y:a,name:"Species",type:"bar",marker:{color:"#ae00f9"}},c={x:o,y:n,name:"Trips",mode:"lines+markers",marker:{color:"green"}},s=[i,c],p={margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{title:"Year",type:"category"},yaxis:{title:"Species / Trips"}},Plotly.newPlot(r,s,p,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}},drawChartSpeciesByOrder:function(e,r){var o,a,n,s,i,c;if(0!==e.length){for(t(r),o=[],a=[],i=0;i<e.length;i++)o[i]=e[i].order_name,a[i]=e[i].speciesCount;s={values:a,labels:o,type:"pie"},n=[s],c={margin:{l:50,r:5,b:100,t:30,pad:5}},Plotly.newPlot(r,n,c,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}},drawChartMonthsForSpecies:function(e,r){var o,a,n,s,i,c;if(0!==e.length){for(t(r),o=[],a=[],i=0;i<e.length;i++)o[i]=e[i].monthName.substring(0,3),a[i]=e[i].sightingCount;s={x:o,y:a,name:"Sightings",type:"bar",marker:{color:"#423ffc"}},n=[s],c={legend:{xanchor:"center",yanchor:"top",y:-.3,x:.5},margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{title:"Month",type:"category"},yaxis:{title:"Sightings"}},Plotly.newPlot(r,n,c,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}}}})}(),function(){"use strict";myApp.factory("MonthsDataFactory",["$http",function(t){return{getData:function(){return t.get("/birding/monthsjson").then(function(t){return t.data})}}}]).factory("OrdersDataFactory",["$http",function(t){return{getData:function(){return t.get("/birding/ordersjson").then(function(t){return t.data})}}}]).factory("SpeciesDataFactory",["$http",function(t){return{getData:function(){return t.get("/birding/speciesjson").then(function(t){return t.data})}}}]).factory("YearsDataFactory",["$http",function(t){return{getData:function(){return t.get("/birding/yearsjson").then(function(t){return t.data})}}}]).factory("DetailDataFactory",["$http",function(t){return{getData:function(e){return t.get("/birding/detailjson/"+e).then(function(t){return t.data})}}}]).factory("DetailMonthsDataFactory",["$http",function(t){return{getData:function(e){return t.get("/birding/detailmonthsjson/"+e).then(function(t){return t.data})}}}])}(),function(){"use strict";myApp.controller("OrdersCtrl",["$scope","OrdersDataFactory","ReportCharts",function(t,e,r){e.getData().then(function(e){e.errors?t.error=e.errors[0]:(t.orders=e,r.drawChartSpeciesByOrder(t.orders,"chart_div"))}),t.predicate="-speciesCount",t.sortResults=function(e){t.reverse=t.predicate===e?!t.reverse:!1,t.predicate=e}}]).controller("MonthsCtrl",["$scope","MonthsDataFactory","ReportCharts",function(t,e,r){e.getData().then(function(e){e.errors?t.error=e.errors[0]:(t.months=e,r.drawChartSpeciesByMonth(t.months,"chart_div"))}),t.predicate="monthNumber",t.sortResults=function(e){t.reverse=t.predicate===e?!t.reverse:!1,t.predicate=e}}]).controller("SpeciesCtrl",["$scope","SpeciesDataFactory",function(t,e){e.getData().then(function(e){e.errors?t.error=e.errors[0]:t.birds=e}),t.predicate="common_name",t.sortResults=function(e){t.reverse=t.predicate===e?!t.reverse:!1,t.predicate=e}}]).controller("YearsCtrl",["$scope","YearsDataFactory","ReportCharts",function(t,e,r){e.getData().then(function(e){e.errors?t.error=e.errors[0]:(t.years=e,r.drawChartSpeciesByYear(t.years,"chart_div"))}),t.predicate="yearNumber",t.sortResults=function(e){t.reverse=t.predicate===e?!t.reverse:!1,t.predicate=e}}]).controller("DetailCtrl",["$scope","$routeParams","DetailDataFactory","DetailMonthsDataFactory","ReportCharts",function(t,e,r,o,a){t.id=e.id,t.goBack=function(){window.history.back()},r.getData(t.id).then(function(e){e.errors?t.error=e.errors[0]:t.bird=e[0]}),o.getData(t.id).then(function(e){e.errors?t.error=e.errors[0]:a.drawChartMonthsForSpecies(e,"chart_div")})}])}();