var myApp=angular.module("myApp",["ngRoute"]);myApp.config(["$routeProvider",function(e){"use strict";e.when("",{templateUrl:"/templates/nodejs.html"}).when("/nodejs",{templateUrl:"/templates/nodejs.html"}).when("/angularjs",{templateUrl:"/templates/angularjs.html"}).when("/bootstrap",{templateUrl:"/templates/bootstrap.html"}).when("/birding",{templateUrl:"/templates/orders.html"}).when("/orders",{templateUrl:"/templates/orders.html"}).when("/months",{templateUrl:"/templates/months.html"}).when("/years",{templateUrl:"/templates/years.html"}).when("/species",{templateUrl:"/templates/species.html"}).when("/detail/:id",{templateUrl:"/templates/detail.html"}).otherwise({redirectTo:"/nodejs"})}]),myApp.config(["$locationProvider",function(e){"use strict";e.hashPrefix("")}]),function(){"use strict";myApp.factory("ReportCharts",function(){var e=function(e){var t=Plotly.d3,r=90,o=90,a=t.select("#"+e).style({width:r+"%",height:o+"vh"}),n=a.node();window.addEventListener("resize",function(){Plotly.Plots.resize(n)})};return{drawChartSpeciesByMonth:function(t,r){var o,a,n,s,i,l,c,d;if(0!==t.length){for(e(r),o=[],a=[],n=[],c=0;c<t.length;c++)o[c]=t[c].monthName.substring(0,3),a[c]=t[c].speciesCount,n[c]=t[c].tripCount;i={x:o,y:a,name:"Species",type:"bar",marker:{color:"#ff7f0e"}},l={x:o,y:n,name:"Trips",mode:"lines+markers",marker:{color:"#3072AB"}},s=[i,l],d={margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{type:"category"},legend:{x:0,y:1,traceorder:"normal",font:{family:"sans-serif",size:12,color:"#000"},bgcolor:"#ECECEC",bordercolor:"#FFFFFF",borderwidth:2}},Plotly.newPlot(r,s,d,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}},drawChartSpeciesByYear:function(t,r){var o,a,n,s,i,l,c,d;if(0!==t.length){for(e(r),o=[],a=[],n=[],c=0;c<t.length;c++)o[c]=t[c].yearNumber,a[c]=t[c].speciesCount,n[c]=t[c].tripCount;i={x:o,y:a,name:"Species",type:"bar",marker:{color:"#ae00f9"}},l={x:o,y:n,name:"Trips",mode:"lines+markers",marker:{color:"green"}},s=[i,l],d={margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{type:"category"},legend:{x:0,y:1,traceorder:"normal",font:{family:"sans-serif",size:12,color:"#000"},bgcolor:"#ECECEC",bordercolor:"#FFFFFF",borderwidth:2}},Plotly.newPlot(r,s,d,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}},drawChartSpeciesByOrder:function(t,r){var o,a,n,s,i,l;if(0!==t.length){for(e(r),o=[],a=[],i=0;i<t.length;i++)o[i]=t[i].order_name,a[i]=t[i].speciesCount;s={values:a,labels:o,type:"pie"},n=[s],l={margin:{l:50,r:5,b:100,t:30,pad:5}},Plotly.newPlot(r,n,l,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}},drawChartMonthsForSpecies:function(t,r){var o,a,n,s,i,l;if(0!==t.length){for(o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e(r),a=[],n=0;n<o.length;n++)a[n]=0;for(n=0;n<t.length;n++)a[t[n].monthNumber-1]=t[n].sightingCount;s={x:o,y:a,name:"Sightings",type:"bar",marker:{color:"#423ffc"}},i=[s],l={legend:{xanchor:"center",yanchor:"top",y:-.3,x:.5},margin:{l:50,r:5,b:50,t:30,pad:5},xaxis:{type:"category"}},Plotly.newPlot(r,i,l,{displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud"]})}}}})}(),function(){"use strict";myApp.factory("MonthsDataFactory",["$http",function(e){return{getData:function(){return e.get("/birding/monthsjson").then(function(e){return e.data})}}}]).factory("OrdersDataFactory",["$http",function(e){return{getData:function(){return e.get("/birding/ordersjson").then(function(e){return e.data})}}}]).factory("SpeciesDataFactory",["$http",function(e){return{getData:function(){return e.get("/birding/speciesjson").then(function(e){return e.data})}}}]).factory("YearsDataFactory",["$http",function(e){return{getData:function(){return e.get("/birding/yearsjson").then(function(e){return e.data})}}}]).factory("DetailDataFactory",["$http",function(e){return{getData:function(t){return e.get("/birding/detailjson/"+t).then(function(e){return e.data})}}}]).factory("DetailMonthsDataFactory",["$http",function(e){return{getData:function(t){return e.get("/birding/detailmonthsjson/"+t).then(function(e){return e.data})}}}])}(),function(){"use strict";myApp.controller("OrdersCtrl",["$scope","OrdersDataFactory","ReportCharts",function(e,t,r){mooredatabaseCustom.setNavPill(),t.getData().then(function(t){t.errors?e.error=t.errors[0]:(e.orders=t,r.drawChartSpeciesByOrder(e.orders,"chart_div"))}),e.predicate="-speciesCount",e.sortResults=function(t){e.reverse=e.predicate===t&&!e.reverse,e.predicate=t}}]).controller("MonthsCtrl",["$scope","MonthsDataFactory","ReportCharts",function(e,t,r){mooredatabaseCustom.setNavPill(),t.getData().then(function(t){t.errors?e.error=t.errors[0]:(e.months=t,r.drawChartSpeciesByMonth(e.months,"chart_div"))}),e.predicate="monthNumber",e.sortResults=function(t){e.reverse=e.predicate===t&&!e.reverse,e.predicate=t}}]).controller("SpeciesCtrl",["$scope","SpeciesDataFactory",function(e,t){mooredatabaseCustom.setNavPill(),t.getData().then(function(t){t.errors?e.error=t.errors[0]:e.birds=t}),e.predicate="common_name",e.sortResults=function(t){e.reverse=e.predicate===t&&!e.reverse,e.predicate=t}}]).controller("YearsCtrl",["$scope","YearsDataFactory","ReportCharts",function(e,t,r){mooredatabaseCustom.setNavPill(),t.getData().then(function(t){t.errors?e.error=t.errors[0]:(e.years=t,r.drawChartSpeciesByYear(e.years,"chart_div"))}),e.predicate="yearNumber",e.sortResults=function(t){e.reverse=e.predicate===t&&!e.reverse,e.predicate=t}}]).controller("DetailCtrl",["$scope","$routeParams","DetailDataFactory","DetailMonthsDataFactory","ReportCharts",function(e,t,r,o,a){mooredatabaseCustom.setNavPill(),e.id=t.id,e.goBack=function(){window.history.back()},r.getData(e.id).then(function(t){t.errors?e.error=t.errors[0]:e.bird=t[0]}),o.getData(e.id).then(function(t){t.errors?e.error=t.errors[0]:a.drawChartMonthsForSpecies(t,"chart_div")})}])}();