<% layout('../layout.ejs') -%>
<% script('//www.google.com/jsapi?key=ABQIAAAAnQwHWIIOdfuy6mmnAPWMrxRz7CDf8eoRpZ9uxznpbqB6UwVVhhQRKXh9O02BW9yOPT-IoRtEsBIL8A') -%>
<% script('/javascripts/google_chart_species_by_month.min.js') -%>
<article class="row-fluid" data-ng-controller="MonthsCtrl">
	<header class="content_box accordion_title"> 
		<h4 class="content_header">Species By Month</h4>
	</header>
	<section class="content_box">
		<p>This page demonstrates</p>
		<ul>   
			<li>Integration of a Node.js app running on Heroku with an Amazon RDS MySQL backend; the
			node module mysql was used for data access.</li>
			<li>The table is drawn client-side using an AngularJS view, service and controller, with JSON data obtained via an AJAX call to the Node.js app.</li>
			<li>The pie chart (not visible on phones) is drawn client-side using the Google Charts API with 
			JSON data obtained via an AJAX call to the Node.js app.</li>
		</ul>
	</section>	
	<div class="hidden-phone">
		<section class="content_box">	
			<figure id="linechart">
			    <div id="chart_div" title="Google Line Chart Example">
			    	<p>Loading...</p>
			    </div>
			</figure>
		</section>
	</div>
	<table id='months' class='report' style='width:100%;' title='Month Sightings'>
		<thead>
			<tr>
		    	<th class='image_title'			data-ng-click="setOrderProp('monthNumber')">Month Number</th>			
		    	<th class='image_title'			data-ng-click="setOrderProp('monthName')">Month Name</th>
		  		<th class='image_title numeric' data-ng-click="setOrderProp('speciesCount')">Species Sighted</th>
		  		<th class='image_title numeric' data-ng-click="setOrderProp('tripCount')">Trips Taken</th>	  		
			</tr>
		</thead>
		<tbody>		
			<tr data-ng-repeat="month in months | orderBy:orderProp:reverse">
				<td class="text-center">{{ month.monthNumber}}</td>
				<td class="text-left">{{ month.monthName }}</td>
				<td class="text-right">{{ month.speciesCount }}</td>	
				<td class="text-right">{{ month.tripCount }}</td>					
			</tr>
		</tbody>
	</table>	
</article>